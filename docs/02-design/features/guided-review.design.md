# Guided Review (가이드 복기) 설계 문서

> 상태: Draft
> 작성: 2026-02-10
> 목표: 듀오링고 스타일의 일일 거래 복기 UX

## 1. 문제 정의

현재 사이트의 복기 흐름이 "딱 눈에 안 들어오는" 문제.
- 리뷰 페이지가 무겁고 접근성이 낮음
- 사용자가 직접 글을 쓰는 방식은 진입장벽이 높음
- 버블/노트 시스템이 처음 사용자에게 직관적이지 않음

## 2. 핵심 컨셉

**"오늘 거래를 버튼 몇 번으로 복기하자"**

- 듀오링고처럼 매일 짧은 복기 세션
- 텍스트 입력 최소화, 버튼/선택지 기반 입력
- 거래 데이터 기반 자동 질문 생성
- 스트릭(연속 기록) 시스템으로 습관화

## 3. 진입 시점

### 3.1 데이터 소스
- 현재: 업비트, 바이낸스 거래 데이터 연동
- 거래 내역이 있는 날에 자동으로 복기 세션 생성
- 비거래일에도 별도 복기 흐름 제공

### 3.2 진입점
- **홈 화면 상단**: "오늘의 복기" 카드 (가장 눈에 띄는 위치)
- **푸시/알림**: 거래 후 일정 시간 뒤 알림
- **복기 페이지**: 기존 리뷰 페이지에서도 접근 가능

## 4. 거래 단위 질문 플로우 (4-Layer)

하나의 거래(또는 거래 묶음)에 대해 순차적으로 진행:

### Layer 1: 의도 (Intent)
> "이 거래를 왜 했나요?"

선택지 예시:
- 기술적 분석 시그널
- 뉴스/이벤트 반응
- 감정적 판단 (FOMO, 공포 등)
- 계획된 정기 매매
- 기타 (짧은 텍스트 입력)

### Layer 2: 감정 (Emotion)
> "거래할 때 기분은 어땠나요?"

상세 감정 선택지:
- 확신 있었다 / 반신반의 / 불안했다
- 흥분됐다 / 침착했다 / 초조했다
- FOMO / 복수매매 충동 / 계획대로
- 복합 선택 가능 (멀티셀렉트)

### Layer 3: 패턴 매칭 (Pattern Match)
> "비슷한 상황이 다시 온다면?"

선택지 예시:
- 같은 판단을 하겠다
- 진입 타이밍을 조정하겠다
- 포지션 사이즈를 줄이겠다
- 이 거래를 하지 않겠다
- 손절/익절 기준을 바꾸겠다

### Layer 4: 메모 (Memo)
> "추가로 기록할 것이 있나요?" (선택 사항)

- 짧은 자유 텍스트 (최대 200자)
- 스킵 가능
- 음성 입력 지원 (향후)

## 5. 다수 거래 처리

### 5.1 묶기 기준
- 같은 심볼에서 5건 이상 거래 → 하나의 묶음으로 처리
- 묶음 헤더: "BTC 12건 거래 (총 +2.3%)"
- 묶음 단위로 Layer 1~4 진행

### 5.2 개별 거래
- 5건 미만이면 건별로 질문
- 각 거래 카드에 진입/청산 가격, 수익률 표시

## 6. 비거래일 복기

거래가 없는 날에도 복기 세션 제공:

> "오늘은 거래를 안 했네요. 시장은 이렇게 움직였어요."

- 주요 심볼 당일 변동률 표시
- 질문: "거래를 안 한 이유는?"
  - 시장 상황이 불확실해서
  - 관망 중 (계획대로)
  - 바빠서 못 봤다
  - 진입 조건이 안 맞았다
- 질문: "놓친 기회가 있었나요?"
  - 네, OOO 시점에 진입했어야 했다
  - 아니요, 올바른 판단이었다

## 7. 라이브러리/요약 뷰

### 7.1 일간 카드
- 날짜별 복기 카드 리스트
- 카드에 표시: 거래 수, 총 수익률, 주요 감정, 핵심 패턴
- 미복기 날짜는 빈 카드로 표시 (유도)

### 7.2 스트릭 시스템
- 연속 복기 일수 표시
- 스트릭 위젯: 홈 화면 상단
- 깨진 스트릭 복구: 당일 포함 최대 1일 이전까지 소급 복기 가능

### 7.3 주간 인사이트
- 주 1회 자동 생성 (AI 기반)
- 이번 주 거래 패턴 요약
- 가장 많이 선택한 감정/의도
- 반복되는 실수 패턴 하이라이트

## 8. 데이터 모델 (초안)

```
guided_reviews
├── id (UUID)
├── user_id (FK)
├── review_date (DATE)
├── status (pending | completed | skipped)
├── streak_count (INT)
├── completed_at (TIMESTAMP)
└── created_at (TIMESTAMP)

guided_review_items
├── id (UUID)
├── review_id (FK → guided_reviews)
├── trade_id (FK → trades, nullable)
├── bundle_key (VARCHAR, nullable - 묶음 식별자)
├── intent (VARCHAR)
├── emotions (JSONB - 복수 선택)
├── pattern_match (VARCHAR)
├── memo (TEXT, nullable)
├── order_index (INT)
└── created_at (TIMESTAMP)

user_streaks
├── user_id (FK, PK)
├── current_streak (INT)
├── longest_streak (INT)
├── last_review_date (DATE)
└── updated_at (TIMESTAMP)
```

## 9. 우선순위

### MVP (Phase 1)
- [ ] 홈 진입점 카드
- [ ] Layer 1~4 질문 플로우 (단일 거래)
- [ ] 일간 카드 리스트
- [ ] 기본 스트릭 카운터

### Phase 2
- [ ] 다수 거래 묶기
- [ ] 비거래일 복기
- [ ] 주간 인사이트 (AI)

### Phase 3
- [ ] 푸시 알림
- [ ] 음성 메모
- [ ] 소급 복기
- [ ] 스트릭 복구 메커니즘

## 10. 미결정 사항

- 감정 선택지 최종 목록 (UX 리서치 필요)
- 스트릭 깨짐 허용 범위 (1일? 2일?)
- AI 주간 인사이트 프롬프트 설계
- 비거래일 판정 기준 (주말 제외? 포함?)
