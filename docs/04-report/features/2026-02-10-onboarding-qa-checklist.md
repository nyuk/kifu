> **Language policy (v1.0-first, English default):**
> - Primary language for repo documentation: English.
> - Baseline is v1.0; v1.1 changes are documented as extension notes only.
> - 한국어는 보조 문맥(필요 시)로 제공됩니다.

# 온보딩 흐름 QA 체크리스트 (고정본)

이 문서는 `회원가입 -> 온보딩 선택 -> 임포트/성향테스트 -> 홈 진입` 흐름의 회귀를 막기 위한 고정 QA 기준입니다.

## 범위
- 인증: `login`, `register`
- 온보딩: `onboarding/start`, `onboarding/import`, `onboarding/test`
- 후속 진입: `home`, `settings`

## 사전 조건
- 백엔드 실행 상태 (`/health` 정상)
- 프론트 실행 상태
- 테스트 계정 2개 이상 준비

## 시나리오 A: 처음부터 시작 -> 회원가입 -> 성향테스트
1. 랜딩에서 `처음부터 시작` 클릭
2. `회원가입 후 진행`(성향테스트 옵션) 클릭
3. 회원가입 완료
4. 기대 결과:
   - `/onboarding/test`로 이동
   - 화면 중앙 정렬 유지
   - 문항 선택 시 자동 저장(새로고침 후 복원)

## 시나리오 B: 처음부터 시작 -> 회원가입 -> 거래내역 불러오기
1. 랜딩에서 `처음부터 시작` 클릭
2. `회원가입 후 진행`(임포트 옵션) 클릭
3. 회원가입 완료
4. 기대 결과:
   - `/onboarding/import`로 이동
   - 화면 중앙 정렬 유지
   - 메인 CTA가 `설정에서 연결 시작`으로 표시

## 시나리오 C: 로그인 실패 UX
1. 로그인 페이지에서 잘못된 비밀번호 입력
2. 기대 결과:
   - 에러 문구가 즉시 사라지지 않음
   - 입력값 유지
   - 로그인 페이지에 그대로 머무름(강제 리다이렉트 없음)

## 시나리오 D: 계정 전환 오염 방지
1. A 계정에서 성향테스트 완료
2. 로그아웃 후 B 계정 로그인 (성향테스트 미완료)
3. 기대 결과:
   - 긴급 탭에서 A 계정 성향 정보가 보이지 않음
   - 기본 브리핑(성향 없음) 노출

## 시나리오 E: 뒤로가기/앞으로가기
1. 회원가입 완료 후 온보딩 페이지 진입
2. 브라우저 뒤로가기
3. 기대 결과:
   - 인증 페이지가 보여도 즉시 홈으로 가드되거나,
   - 히스토리 혼선 없이 현재 인증 상태가 유지됨

## 기술 고정점
- 인증 리다이렉트 우선순위는 `frontend/src/lib/onboardingFlow.ts`에서만 관리
- 로그인/회원가입 성공 이동은 `window.location.replace(...)` 사용
- 성향 프로필 저장 키는 계정별 (`kifu-onboarding-profile-v1:<user-id>`)

