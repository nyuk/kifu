# 웹 MCP 소형 테스트 룰북 (Kifu)

이 문서는 자동화와 별도로, 브라우저 기반 빠른 재현/수동 점검용 체크리스트다.
백엔드/프론트 기본 동작을 빠르게 확인할 때 사용한다.

## 공통 준비
- 백엔드: `http://127.0.0.1:8080` 정상 동작
- 프론트: `http://127.0.0.1:5173` 정상 동작
- 샌드박스/테스트 계정 사용 권장
- 브라우저: 시크릿/새 탭부터 시작(캐시 영향 최소화)

## Case A — 로그인/세션
- [ ] 로그인 성공 후 `/home` 진입
- [ ] 탭 이동 후 새로고침 시 `/login` 강제 리다이렉트 없음
- [ ] 한 번 로그인이 끝나면 뒤로가기/앞으로가기 남용 시 무한반복 루프 없음

## Case B — 거래소 동기화
- [ ] 연결된 거래소 목록 표시
- [ ] 동기화 실행 시 응답/에러 로그 확인
- [ ] Trade 탭 건수 증가(또는 기존 데이터 기준 증분 체크)
- [ ] Home, Portfolio, Review/Bubble 내 트레이드 기반 요약이 함께 갱신되는지 확인

## Case C — 차트/말풍선 정합성
- [ ] 차트 심볼 이동 (BTCUSDT, 거래내역이 존재한 심볼 우선)
- [ ] 타임프레임 변경(1d/4h/1h) 시 데이터 반응
- [ ] 최근 말풍선 최소 5개 표시
- [ ] 말풍선 클릭 시 상세가 차트 타임스탬프/시간 축과 정합되는지 확인

## Case D — 복기/리뷰 정합성
- [ ] Home 핵심 수치(실거래, 매수/매도, 주요 심볼, 주요 거래소)와 Review 요약 비교
- [ ] Review의 최근 데이터 구간이 거래 내역/버블과 시간 일치
- [ ] 복기 데이터가 정상적으로 없으면 `정합성 없는 상태` 메시지 노출 여부 확인

## Case E — AI 의견 수집(짧은 의견)
- [ ] 말풍선 상세 또는 복기에서 의견 수집 실행
- [ ] 응답 포맷: `상황/근거/액션` 형태
- [ ] 502/401/네트워크 오류 반복시 에러 메시지와 재시도 동작 확인

## Case F — 성능/레이아웃 스트레스
- [ ] 탭 간 스크롤 시 카드 겹침/공백/잘림 없음
- [ ] 텍스트 가독성(너무 작은 글자/색 대비) 점검
- [ ] 모바일/데스크톱 폭 전환 시 핵심 카드 손실 없음

## Case G — 빠른 정합성 요약 추출
문제가 발생하면 즉시 아래로 진단 산출물 확보

```bash
KIFU_AUDIT_EMAIL=<email> KIFU_AUDIT_PASSWORD=<password> \
python3 scripts/kifu_state_audit.py --api http://127.0.0.1:8080 --summary --save /tmp/kifu-audit.json
python3 scripts/kifu_audit_extract.py /tmp/kifu-audit.json
```

## 테스트 기록 템플릿
- 시나리오:
- 계정:
- 시간:
- 백엔드/프론트:
- Case 통과:
  - A:
  - B:
  - C:
  - D:
  - E:
  - F:
- 실패 항목:
  - Trade:
  - Review:
  - Portfolio:
  - Bubble:
  - Chart:
- 네트워크 로그:
- 스크린샷:
